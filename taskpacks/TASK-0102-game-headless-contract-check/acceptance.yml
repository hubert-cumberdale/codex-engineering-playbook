version: 1
deps: []

format:
  commands:
    - python -m compileall -q tools

lint:
  commands:
    # Strict canary: only this taskpack may change when run in isolation
    - python tools/acceptance/check_git_diff_scope.py --allowed taskpacks/TASK-0102-game-headless-contract-check/
    # Game posture: forbid subjective/playtest language in repo content
    - python tools/acceptance/check_no_subjective_language.py --path .

tests:
  commands:
    - python -m pytest -q
    # Evidence-first: artifacts must exist and reference deterministic/headless validation
    - python tools/acceptance/check_artifacts_present.py --path taskpacks/TASK-0102-game-headless-contract-check/artifacts
    - python tools/acceptance/check_artifact_contains_any.py --path taskpacks/TASK-0102-game-headless-contract-check/artifacts --any deterministic headless validation batchmode export
    # Ensure engine/version intent is explicitly declared somewhere in task/spec/artifacts
    - python tools/acceptance/check_engine_declared_in_taskpack.py --task-yml taskpacks/TASK-0102-game-headless-contract-check/task.yml --spec taskpacks/TASK-0102-game-headless-contract-check/spec.md --artifact-path taskpacks/TASK-0102-game-headless-contract-check/artifacts
